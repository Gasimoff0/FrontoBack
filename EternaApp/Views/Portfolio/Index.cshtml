@using EternaApp.ViewModels
@model PortfolioVm
<!-- Page Title -->
<div class="page-title" data-aos="fade">
    <div class="container">
        <nav class="breadcrumbs">
            <ol>
                <li><a asp-controller="Home" asp-action="Index">Home</a></li>
                <li class="current">Portfolio</li>
            </ol>
        </nav>
        <h1>Portfolio</h1>
    </div>
</div><!-- End Page Title -->
<!-- Portfolio Section -->
<section id="portfolio" class="portfolio section">

    <div class="container">

        <div class="isotope-layout" data-default-filter="*" data-layout="masonry" data-sort="original-order">

            <ul class="portfolio-filters isotope-filters" data-aos="fade-up" data-aos-delay="100">
                <li data-filter="*" class="filter-active">All</li>
                @if (Model.Categories != null)
                {
                    @foreach (var category in Model.Categories)
                    {
                        <li data-filter="@($".filter-{category.Name?.ToLower()}")">@category.Name</li>
                    }
                }
            </ul><!-- End Portfolio Filters -->

            <div class="row gy-4 isotope-container" data-aos="fade-up" data-aos-delay="200">

                @if (Model.Portfolios != null)
                {
                    @foreach (var portfolio in Model.Portfolios)
                    {
                        var categoryName = portfolio.Category?.Name?.ToLower() ?? "uncategorized";
                        var firstImage = portfolio.PortfolioImages?.FirstOrDefault();
                        var imageUrl = firstImage?.ImageUrl ?? "default-portfolio.jpg";

                        <div class="col-lg-4 col-md-6 portfolio-item isotope-item filter-@categoryName">
                            <div class="portfolio-content h-100">
                                <img src="~/assets/img/portfolio/@imageUrl" class="img-fluid" alt="@portfolio.Name">
                                <div class="portfolio-info">
                                    <h4>@portfolio.Name</h4>
                                    <p>@portfolio.Description</p>
                                    <a href="assets/img/portfolio/@imageUrl" title="@portfolio.Name" data-gallery="portfolio-gallery-app" class="glightbox preview-link"><i class="bi bi-zoom-in"></i></a>
                                    <a asp-action="detail" asp-route-id="@portfolio.Id" title="More Details" class="details-link"><i class="bi bi-link-45deg"></i></a>
                                </div>
                            </div>
                        </div>

                        <!-- End Portfolio Item -->
                    }
                }

            </div><!-- End Portfolio Container -->

        </div>

    </div>

</section><!-- /Portfolio Section -->
<!-- Clients Section -->
<section id="clients" class="section clients">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
        <h2>Clients</h2>
        <p>Necessitatibus eius consequatur ex aliquid fuga eum quidem sint consectetur velit. Quisquam quos quisquam cupiditate. Et nemo qui impedit suscipit alias ea. Quia fugiat sit in iste officiis commodi quidem hic quas</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="swiper init-swiper">
            <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 600,
                  "autoplay": {
                    "delay": 5000
                  },
                  "slidesPerView": "auto",
                  "pagination": {
                    "el": ".swiper-pagination",
                    "type": "bullets",
                    "clickable": true
                  },
                  "breakpoints": {
                    "320": {
                      "slidesPerView": 2,
                      "spaceBetween": 40
                    },
                    "480": {
                      "slidesPerView": 3,
                      "spaceBetween": 60
                    },
                    "640": {
                      "slidesPerView": 4,
                      "spaceBetween": 80
                    },
                    "992": {
                      "slidesPerView": 6,
                      "spaceBetween": 120
                    }
                  }
                }
            </script>
            <div class="swiper-wrapper align-items-center">

                @foreach (var client in Model.Clients)
                {
                    <div class="swiper-slide"><img src="~/assets/img/clients/@client.ImageUrl" class="img-fluid" alt="Client"></div>
                }
            </div>
            <div class="swiper-pagination"></div>    
        </div>

    </div>

</section><!-- /Clients Section -->